<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport"
	content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=0;" />
<title>Insert title here</title>
<script type="text/javascript"
	src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/iscroll.js"></script>

<link rel="stylesheet" type="text/css" href="css/general.css" />
<link rel="stylesheet" type="text/css" href="css/portrait.css" />
<link rel="stylesheet" type="text/css" href="css/landscape.css" />

<script type="text/javascript">
	var ORIENTATION_PORT = 0;
	var ORIENTATION_LAND = 1;

	function changeOrientation(orientation) {
		if (orientation == 0) //portrait
		{
			$("body").addClass("port").removeClass("land");
			//hide any popouts
			$(".popout").hide();
		}
		else//landscape
		{
			$("body").addClass("land").removeClass("port");
			$("#wrapper").show();
		}
		

	}

	$(document).ready(function() {
		
		
		document.addEventListener('touchmove', function(e) {
			e.preventDefault();
		});
		
		//hide popout on window touch
		document.addEventListener('touchstart', function(e) {
			e.preventDefault();
			//hide all pop ups
			$(".port .popout").fadeOut();
		});
		
		scroller = new iScroll('scroller');

		$(".button").bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd);
		$(".postbutton").bind("touchstart",handlePostButtonTouchStart).bind("touchend",handlePostButtonTouchEnd);
		
		//flip page
		$(".frontbutton").bind("touchend",function(e){
			e.preventDefault();//prevent copy and mag from showing
			//flip paper
			$("#paper_wrapper .front").addClass("flip");
			$("#paper_wrapper .back").addClass("flip");
			
		});
		
		$(".backbutton").bind("touchend",function(e){
			e.preventDefault();//prevent copy and mag from showing
			//flip paper back
			$("#paper_wrapper .front").removeClass("flip");
			$("#paper_wrapper .back").removeClass("flip");
		});
		
		var orientation;
		if (window.innerWidth > window.innerHeight)
			orientation = ORIENTATION_LAND;
		else
			orientation = ORIENTATION_PORT;

		if (orientation == 0)
			$("body").addClass("port").removeClass("land");
		else
			$("body").addClass("land").removeClass("port");
	});
	
	function handlePostButtonTouchStart(e){
		e.preventDefault();//prevent copy and mag from showing
		var obj = e.currentTarget;
		
		if($(obj).attr("id") == "search")
		{
			$(obj).addClass("search_touch");
			
		}
		else if($(obj).attr("id") == "list")
		{
			$(obj).addClass("list_touch");
		}
	}
	
	function handlePostButtonTouchEnd(e){
		var obj = e.currentTarget;
		$(obj).removeClass("search_touch");
		$(obj).removeClass("list_touch");
		
		//show popoaver here
		//hid any open popouts
		$(".popout").hide();
		if($(obj).attr("id") == "search")
			$(".port #button_block").fadeIn();
		else if($(obj).attr("id") == "list")
			$(".port #wrapper").fadeIn();
		
		
	}
	
	function handleTouchStart(e){
		e.preventDefault();//prevent copy and mag from showing
		var obj = e.currentTarget;
		$(obj).addClass("touched");
		
	}
	
	function handleTouchEnd(e){
		var obj = e.currentTarget;
		$(obj).removeClass("touched");
	}
	
	
</script>

</head>
<body>
<div id="postcards">
	<div id="button_block" class="popout ui-cornor-all">
		<ul>
			<li id="show_all" class="button">Show All Drinks</li>
			<li id="filter_cat" class="button">Filter By Category</li>
			<li id="filter_ing" class="button">Filter By Ingredients</li>
			<li id="fav" class="button">Favorites</li>
			<li id="create" class="button">Create New Drinks</li>
		</ul>
	</div>
<div id="wrapper" class="popout ui-cornor-all">
	<div id="scroller">
		<ul id="list_wrapper">
			<li class="list_item">just one</li>
			<li class="list_item">two</li>
			<li class="list_item">three</li>
			<li class="list_item">four</li>
			<li class="list_item">five</li>
			<li class="list_item">six</li>
			<li class="list_item">seven</li>
			<li class="list_item">one</li>
			<li class="list_item">two</li>
			<li class="list_item">three</li>
			<li class="list_item">four</li>
			<li class="list_item">five</li>
			<li class="list_item">six</li>
			<li class="list_item">seven</li>
			<li class="list_item">one</li>
			<li class="list_item">two</li>
			<li class="list_item">three</li>
			<li class="list_item">four</li>
			<li class="list_item">five</li>
			<li class="list_item">six</li>
			<li class="list_item">seven</li>
			<li class="list_item">one</li>
			<li class="list_item">two</li>
			<li class="list_item">three</li>
			<li class="list_item">four</li>
		</ul>
	</div>
</div>
<div id="nav_post">
	<div id="list" class="postbutton"></div>
	<div id="search" class="postbutton"></div>
</div>
<div id="paper_wrapper">
	<div class="paper">
		<div class="face front"><div class="frontbutton flipbutton" style="padding:50px 10px 10px 100px;">flip</div></div>
		<div class="face back"><div class="backbutton flipbutton" style="padding:50px  100px 10px 10px;float:right;">flip back</div></div>
	</div>
</div>

</div>
</body>
</html>
